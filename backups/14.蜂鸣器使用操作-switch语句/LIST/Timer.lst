C51 COMPILER V9.52.0.0   TIMER                                                             09/23/2021 11:06:40 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN ..\OBJ\Timer.obj
COMPILER INVOKED BY: C:\Keil_V4\C51\BIN\C51.EXE ..\USER\Timer.c BROWSE INCDIR(..\USER) DEBUG OBJECTEXTEND PRINT(..\LIST\
                    -Timer.lst) TABS(2) OBJECT(..\OBJ\Timer.obj)

line level    source

   1          #include "Timer.H"    //ͷļʱй Լģ
   2          
   3          
   4          /*
   5          ** һ ȫֱֲ νȫּǶںⲿı
   6          ** ȫֱκεطãΣķвٲ
   7          ** ȫֱڻ ܲþ;
   8          ** Ŀ꣺ھ ϣŹţ··
   9          ** ȫֱĹؼ volatile ˼ǡġ
  10          ** ǰ׺volatileıرǻᱻŻ
  11          
  12          ** ֲںڲ ֻܡʹ
  13          
  14          ** ؼstatic ̬ ޸ģ򲻻ıֵBuzzerļSysLedļ
  15          
  16          
  17          ** ڱ
  18          ** bit              1λҪô0Ҫô1ע00,11ֲͬ״̬
  19          ** unsigned char    ޷ַͣ8λʾΧ0-255
  20          ** unsigned int     ޷Σ16λʾΧ0-65535
  21          ** unsigned long    ޷ų 32λʾΧԼȥ
  22          
  23          ** ܰʾ8λóĳ8λԣܲ16λͲãʱѭԭǣþͺã
             -
  24          
  25          */
  26          
  27          
  28          //ԲvolatileãѧƬ˼˵֪ؼɶ˼
  29          volatile  bit   Flag_1ms = 0,Flag_10ms = 0;//2ȫֱÿӦĶʱʱΪ1ʾʱ䵽
  30          
  31          void Timer0Init(void)   //1@11.0592MHz
  32          {
  33   1        AUXR &= 0x7F;   //ʱʱ12Tģʽ
  34   1        TMOD &= 0xF0;   //öʱģʽ
  35   1        TL0 = 0x66;   //öʱֵ
  36   1        TH0 = 0xFC;   //öʱֵ
  37   1        TF0 = 0;    //TF0־
  38   1        TR0 = 1;    //ʱ0ʼʱ
  39   1      
  40   1        ET0 = 1;    //T0ж
  41   1        EA  = 1;    //ж
  42   1        
  43   1      }
  44          
  45          
  46          void T0_ISR(void) interrupt 1
  47          {
  48   1        Flag_1ms = 1;
  49   1      }
  50          
  51          
  52          
  53          
C51 COMPILER V9.52.0.0   TIMER                                                             09/23/2021 11:06:40 PAGE 2   

  54          void Timer1Init(void)   //10@11.0592MHz
  55          {
  56   1        AUXR &= 0xBF;   //ʱʱ12Tģʽ
  57   1        TMOD &= 0x0F;   //öʱģʽ
  58   1        TL1 = 0x00;   //öʱֵ
  59   1        TH1 = 0xDC;   //öʱֵ
  60   1        TF1 = 0;    //TF1־
  61   1        TR1 = 1;    //ʱ1ʼʱ
  62   1      
  63   1        ET1 = 1;    //T1ж
  64   1        EA  = 1;    //ж
  65   1      }
  66          
  67          
  68          void T1_ISR(void) interrupt 3
  69          {
  70   1        Flag_10ms = 1;
  71   1      }
  72          
  73          
  74          
  75          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     48    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
